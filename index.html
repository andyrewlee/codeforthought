<!DOCTYPE html>
<html>
  <head>
    <link href="bootswatch.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script src="jquery.js"></script>
    <script src="bootstrap.js"></script>
    <script src="ace-builds/src-noconflict/ace.js" type="text/javascript"
      charset="utf-8"></script>
    <style id="css"></style>
  </head>
  <body>

    <!-- begin navbar -->
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">Code For Thought</a>
          <button class="navbar-toggle"
            type="button"
            data-toggle="collapse"
            data-target="#navbar-main">
            <span class="icon-bar"><!----></span>
            <span class="icon-bar"><!----></span>
            <span class="icon-bar"><!----></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="#"
                data-toggle="modal" data-target="#challenge_1">Challenge 1</a>
            </li>
            <li>
              <a href="#"
                data-toggle="modal" data-target="#challenge_2">Challenge 2</a>
            </li>
            <li>
              <a href="#"
                data-toggle="modal" data-target="#challenge_3">Challenge 3</a>
            </li>
            <li>
              <a href="#"
                data-toggle="modal" data-target="#challenge_4">Challenge 4</a>
            </li>
            <li>
              <a href="#"
                data-toggle="modal" data-target="#challenge_5">Challenge 5</a>
            </li>
            <li>
              <a href="#"
                data-toggle="modal" data-target="#challenge_6">Challenge 6</a>
            </li>
            <li>
              <a href="#"
                data-toggle="modal" data-target="#challenge_7">Challenge 7</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- end navbar -->

    <!-- begin Challenge 1 -->
    <div class="modal fade" id="challenge_1" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">Challenge 1</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Answer
            </button>
            <button type="button" class="btn btn-primary">
              Keep Coding
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- end Challenge 1 -->

    <!-- begin Challenge 2 -->
    <div class="modal fade" id="challenge_2" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">Challenge 2</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Answer
            </button>
            <button type="button" class="btn btn-primary">
              Keep Coding
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- end Challenge 2 -->


    <!-- begin Challenge 3 -->
    <div class="modal fade" id="challenge_3" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">Challenge 3</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Answer
            </button>
            <button type="button" class="btn btn-primary">
              Keep Coding
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- end Challenge 3 -->


    <!-- begin Challenge 4 -->
    <div class="modal fade" id="challenge_4" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">Challenge 4</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Answer
            </button>
            <button type="button" class="btn btn-primary">
              Keep Coding
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- end Challenge 4 -->


    <!-- begin Challenge 5 -->
    <div class="modal fade" id="challenge_5" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">Challenge 5</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Show Answer
            </button>
            <button type="button" class="btn btn-primary">
              Keep Coding
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- end Challenge 5 -->


    <!-- begin Challenge 6 -->
    <div class="modal fade" id="challenge_6" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">Challenge 6</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Answer
            </button>
            <button type="button" class="btn btn-primary">
              Keep Coding
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- end Challenge 6 -->


    <!-- begin Challenge 7 -->
    <div class="modal fade" id="challenge_7" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">Challenge 7</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Answer
            </button>
            <button type="button" class="btn btn-primary">
              Keep Coding
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- end Challenge 7 -->


    <div class="container">
      <div class="row">
        <div class="col-sm-6">
          <h5>Browser</h5>
          <div id="browser">
            <div id="html"></div>
            <script id="js"></script>
          </div>
        </div>
        <div class="col-sm-6">
          <div id="main_editor">
            <div id="terminal">
            </div>
          </div>
        </div>
      </div>
      <div id="editors" class="row">
        <div id="editor_one" ondblclick="goToMain(id)" class="col-sm-4">
          <div id="html_editor"></div>
        </div>
        <div id="editor_two" ondblclick="goToMain(id)" class="col-sm-4">
          <div id="css_editor"></div>
        </div>
        <div id="editor_three" ondblclick="goToMain(id)" class="col-sm-4">
          <div id="js_editor"></div>
          <button class="pull-right btn-sm btn-primary"
            onclick="runScript()">Evaluate</button>
        </div>
      </div>
      <div id="learning_content"></div>
    </div>
    <script>

      var main = document.getElementById('main_editor');
      var editor_one = document.getElementById('editor_one');
      var editor_two = document.getElementById('editor_two');
      var editor_three = document.getElementById('editor_three');

      if(localStorage.getItem('main_editor')) {

        if(localStorage.getItem('main_editor') == "html_editor") {
          main.innerHTML = '<h5>HTML<\/h5><div id="html_editor"><\/div>';
        } else if(localStorage.getItem('main_editor') == "css_editor") {
          main.innerHTML = '<h5>CSS<\/h5><div id="css_editor"><\/div>';
        } else if(localStorage.getItem('main_editor') == "js_editor") {
          main.innerHTML = '<h5>JavaScript<\/h5><div id="js_editor"><\/div><button class="pull-right btn-sm btn-primary" onclick="runScript()">Evaluate<\/button>';
        } else if(localStorage.getItem('main_editor') == "terminal") {
          main.innerHTML = '<h5>Terminal<\/h5><div id="terminal"><\/div>';
        } else {
          main.innerHTML = '<h5>Terminal<\/h5><div id="terminal"><\/div>';
        }

      } else {

        main.innerHTML = '<h5>Terminal<\/h5><div id="terminal"><\/div>';
        localStorage.setItem('main_editor', 'terminal');

      }

      if(localStorage.getItem('editor_one')) {

        if(localStorage.getItem('editor_one') == "html_editor") {
          editor_one.innerHTML = '<h5>HTML<\/h5><div id="html_editor"><\/div>';
        } else if(localStorage.getItem('editor_one') == "css_editor") {
          editor_one.innerHTML = '<h5>CSS<\/h5><div id="css_editor"><\/div>';
        } else if(localStorage.getItem('editor_one') == "js_editor") {
          editor_one.innerHTML = '<h5>JavaScript<\/h5><div id="js_editor"><\/div><button class="pull-right btn-sm btn-primary" onclick="runScript()">Evaluate<\/button>';
        } else if(localStorage.getItem('editor_one') == "terminal") {
          editor_one.innerHTML = '<h5>Terminal<\/h5><div id="terminal"><\/div>';
        } else {
          editor_one.innerHTML = '<h5>HTML<\/h5><div id="html_editor"><\/div>';
        }
      } else {

        editor_one.innerHTML = '<h5>HTML<\/h5><div id="html_editor"><\/div>';
        localStorage.setItem('editor_one', 'html');

      }

      if(localStorage.getItem('editor_two')) {

        if(localStorage.getItem('editor_two') == "html_editor") {
          editor_two.innerHTML = '<h5>HTML<\/h5><div id="html_editor"><\/div>';
        } else if(localStorage.getItem('editor_two') == "css_editor") {
          editor_two.innerHTML = '<h5>CSS<\/h5><div id="css_editor"><\/div>';
        } else if(localStorage.getItem('editor_two') == "js_editor") {
          editor_two.innerHTML = '<h5>JavaScript<\/h5><div id="js_editor"><\/div><button class="pull-right btn-sm btn-primary" onclick="runScript()">Evaluate<\/button>';
        } else if(localStorage.getItem('editor_two') == "terminal") {
          editor_two.innerHTML = '<h5>Terminal<\/h5><div id="terminal"><\/div>';
        } else {
          editor_two.innerHTML = '<h5>CSS<\/h5><div id="css_editor"><\/div>';
        }

      } else {

        editor_two.innerHTML = '<h5>CSS<\/h5><div id="css_editor"><\/div>';
        localStorage.setItem('editor_two', 'css');

      }

      if(localStorage.getItem('editor_three')) {

        if(localStorage.getItem('editor_three') == "html_editor") {
          editor_three.innerHTML = '<h5>HTML<\/h5><div id="html_editor"><\/div>';
        } else if(localStorage.getItem('editor_three') == "css_editor") {
          editor_three.innerHTML = '<h5>CSS<\/h5><div id="css_editor"><\/div>';
        } else if(localStorage.getItem('editor_three') == "js_editor") {
          editor_three.innerHTML = '<h5>JavaScript<\/h5><div id="js_editor"><\/div><button class="pull-right btn-sm btn-primary" onclick="runScript()">Evaluate<\/button>';
        } else if(localStorage.getItem('editor_three') == "terminal") {
          editor_three.innerHTML = '<h5>Terminal<\/h5><div id="terminal"><\/div>';
        } else {
          editor_three.innerHTML = '<h5>JavaScript<\/h5><div id="js_editor"><\/div><button class="pull-right btn-sm btn-primary" onclick="runScript()">Evaluate<\/button>';
        }
      } else {

        editor_three.innerHTML = '<h5>JavaScript<\/h5><div id="js_editor"><\/div><button class="pull-right btn-sm btn-primary" onclick="runScript()">Evaluate<\/button>';
        localStorage.setItem('editor_three', 'js');

      }

      main.children[1].style.height = "360px";
      editor_one.children[1].style.height = "250px";
      editor_two.children[1].style.height = "250px";
      editor_three.children[1].style.height = "250px";

      function goToMain(id) {
        editor_to_main = document.getElementById(id);
        main_to_editor = document.getElementById('main_editor').children[1].id;

        localStorage.setItem(editor_to_main.id, main_to_editor);
        localStorage.setItem("main_editor", editor_to_main.children[1].id);

        location.reload();
      }

      var store = [];
      var oldf = console.log;

      console.log = function() {
        store.push(arguments)
        for(var i = 0; i < arguments.length; i++) {
          var new_log = "<p>"
          if(typeof arguments[i] == 'object') {
            new_log += JSON.stringify(arguments[i], null, 4);
          } else {
            new_log += arguments[i];
          }
          new_log += "<\/p>";
          var terminal = document.getElementById('terminal');
          terminal.innerHTML += new_log;
        }
        oldf.apply(console, arguments);
      }

      var html_editor = ace.edit("html_editor");
      html_editor.setTheme("ace/theme/monokai");
      html_editor.getSession().setMode("ace/mode/html");
      html_editor.getSession().setValue(localStorage.getItem("html"));

      var html = document.getElementById('html');
      var html_value = html_editor.getSession().getValue();
      html.innerHTML = html_value;

      var css_editor  = ace.edit("css_editor");
      css_editor.setTheme("ace/theme/github");
      css_editor.getSession().setMode("ace/mode/css");
      css_editor.getSession().setValue(localStorage.getItem("css"));

      var css = document.getElementById('css');
      var css_value = css_editor.getSession().getValue();
      css.innerHTML = css_value;

      var js_editor = ace.edit("js_editor");
      js_editor.setTheme("ace/theme/solarized_light");
      js_editor.getSession().setMode("ace/mode/javascript");
      js_editor.getSession().setValue(localStorage.getItem("js"));

      runScript();

      html_editor.on('change', function() {
        var html = document.getElementById('html');
        var html_value = html_editor.getSession().getValue();
        html.innerHTML = html_value;
        localStorage.setItem("html", html_value);
      })

      css_editor.on('change', function() {
        var css = document.getElementById('css');
        var css_value = css_editor.getSession().getValue();
        css.innerHTML = css_value;
        localStorage.setItem("css", css_value);
      })

      js_editor.on('change', function() {
        var js_value = js_editor.getSession().getValue();
        localStorage.setItem("js", js_value);
        console.dir(localStorage.getItem("js"));
      })

      function runScript() {
        document.onkeydown = null
        var terminal = document.getElementById('terminal');
        terminal.innerHTML = "";
        try {
          eval(js_editor.getSession().getValue())
        } catch (e) {
          terminal.innerHTML += "<p class='error'>error<\/p>";
        }
      }
    </script>
  </body>
</html>
